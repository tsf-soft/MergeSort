# **Руководство пользователя**

<br/>

## **1. Назначение утилит**

Настоящее руководство содержит сведения, необходимые для использования комплекта `Command Line Interface (CLI)` утилит, выполняющих сортировку слиянием
набора текстовых файлов `произвольного` формата. Сортируемые слиянием входные файлы объединяются в один выходной текстовый файл.

<br/>

## **2. Особенности и достоинства утилит**

### **2.1. Произвольный формат входных текстовых файлов**

### **2.2. Распараллеливание процесса обработки**

### **2.3. Хранение рабочей конфигурации в конфигурационных файлах**

### **2.4. Широкие возможности пользовательских настроек**

### **2.5. "Цветной" вывод в терминал**

<br/>

## **3. Состав комплекта утилит**

Комплект состоит из двух `CLI` утилит:
- Утилита ___подготовки___ файлов входных данных для сортировки (в двух вариантах запуска):
  
  | **Файл** | **Иконка** | **Java (ver)** | **Назначение** |
  |:-----|--------|------------|------------|
  | `TsfDataPrepare.jar` | ![Логотип Java](https://github.com/tsf-soft/MergeSort/assets/6228605/896d02ef-8d0c-4b01-b224-5246397fde94) | 1.11.0[^1]  | CLI-утилита подготовки файлов входных данных, запускается через JVM |
  | `WinTsfDataPrepare.exe` | ![WinTsfDataPrepare - иконка](https://github.com/tsf-soft/MergeSort/assets/6228605/0013e8f1-0c0e-4f0c-937f-9edcbb599c5a) | 1.20.0[^2] | CLI-утилита подготовки файлов входных данных, запускается исполняющей системой Windows |
  <p>Таблица 3.1.

- Утилита ___сортировки слиянием___ подготовленных файлов входных данных (в двух вариантах запуска):

  | **Файл** | **Иконка** | **Java (ver)** | **Назначение** |
  |:-----|--------|------------|------------|
  | `TsfMergeSort.jar` | ![Логотип Java](https://github.com/tsf-soft/MergeSort/assets/6228605/896d02ef-8d0c-4b01-b224-5246397fde94) | 1.11.0[^1]  | CLI-утилита сортировки слиянием входных данных, запускается через JVM |
  | `WinTsfMergeSort.exe` | ![WinTsfMergeSort - иконка](https://github.com/tsf-soft/MergeSort/assets/6228605/0f2cf81c-6ccb-4d68-8541-6658baf092d7) | 1.20.0[^2] | CLI-утилита сортировки слиянием входных данных, запускается исполняющей системой Windows |
  <p>Таблица 3.2.
  
[^1]: Утилита написана под Java 1.11.0.
[^2]: Утилита собрана с JRE 1.20.0.

<br/>

## **4. Запуск утилит**

Возможно использование обоих вариантов утилит, как запускаемый через Java-машину, так и запускаемый через исполняющую систему Windows. Результат выдаваемый соответствующими утилитами не зависит
от способа их запуска.

### **4.1. Запуск утилит из командной строки**

Для запуска утилит подготовки входных данных, в командрую строку Windows (`cmd`, `powershell`, либо иных интерпретаторов) нужно ввести такие команды:
```
<Prompt>cd "<Disk>:\<ваш каталог>"
... 
<Prompt>java -jar TsfDataPrepare.jar [<опции>] {<Имя входного файла>...}
... или
<Prompt>TsfDataPrepare.exe [<опции>] <Имя выходного файла> {<Имя входного файла>...}
```
<p>Листинг 4.1.</p>

>Примечание: Здесь в первой строке мы переходим в рабочий каталог файловой системы, где расположены запускаемые файлы. Затем, в зависимости от варианта запуска, мы используем либо `jar`-версию программы, либо её `exe`-версию. Об элементах командной строки, указанных в CLI-листингах, сказано далее, в разделе <a href="#cli_args">Агрументы командной строки утилит</a>.

<br/>

Для запуска утилиты сортировки поступаем аналогично, но уже применительно к файлам сортировки:
```
<Prompt>cd "<Disk>:\<ваш каталог>"
... 
<Prompt>java -jar WinTsfMergeSort.jar [<опции>] {<Имя входного файла>...}
... или
<Prompt>WinTsfMergeSort.exe [<опции>] <Имя выходного файла> {<Имя входного файла>...}
```
<p>Листинг 4.2.</p>

### **4.2. Агрументы командной строки утилит**

<a name="cli_args"></a>

Как показано в _Листингах 4.1.-4.2._, при запуске утилит в командной строке задаются следующие аргументы:
- _[<опции>]_ - не обязательные аргументы (могут отсутствовать) в количестве до 3-х штук определяющие следующие категории:
  - `тип данных` содержащихся в обрабатываемых файлах;
  - `направление сортировки` данных;
  - `степень распараллеливания` процесса обработки.
- _{<Имя входного файла>...}_ - от одного до нескольких входных текстовых файлов, подлежащих обработке. Это обязательный аргумент для обоих утилит.
- _<Имя выходного файла>_ - имя (одного) выходного текстового файла, являющегося результатом работ. Это обязательный аргумент для для утилиты `WinTsfMergeSort`. Для улилиты `TsfDataPrepare` этот аргумент __не требуется__. Утилита `TsfDataPrepare` выходным файлам присваивает такие-же имена, какие имели позиционно соответствующие им входные файлы.

Специфика командной строки для утилиты `TsfDataPrepare` заключается в том, что все имена файлов, перечисленные в качестве аргументов считаются входными файлами подлежащими обработке, в то время как для утилиты `WinTsfMergeSort` позиционно первое имя файла (после опций, если они представлены), является именем выходного файла. Иные имена файлов (после первого), перечисленные далее через пробелы, - являются входными файлами для этой утилиты.
Это связано с тем, что утилита `TsfDataPrepare` обрабатывает содержимое входного файла и обработанному файлу присваивает то-же имя, но файл будет находится в другом репозитарии (каталоге). Для утилиты `WinTsfMergeSort` ситуация иная. Вне зависимости от того, как много файлов будет заявлено для этой утилиты в качестве входных, - результатом работы утилиты будет один файл, формат и содержимое которого соттветствуют указанным при запуске утилиты опциям.

#### **4.2.1. Опции командной строки**

В разделе <a href="#cli_args">Агрументы командной строки утилит</a> перечислены три категории опций, указываемых в командной строке. Здесь указанные опции будут описаны подробно.
Опция представляет собой сочетание двух символов: -<дефис> и <один или несколько символов ASCII>, например: `-k`, `-p8`.

__Опция `Тип данных`__ может принимать одно из двух значений:
- `-i` - числовые данные (целое число от 0 до 2147483647); - эта опция является значением по умолчанию;
- `-s` - символьные данные (любой отображаемый символ UTF-8, за исключением пробельных символов, к которым в т.ч. относятся и управляющие символы).

__Опция `Тип сортировки`__ может принимать одно из двух значений:
- `-a` - сортировка по возрастанию (значение по умолчанию); для чисел - по возрастанию номера, для символов - по возрастанию лексикографического порядка;
- `-d` - сортировка по убыванию; для чисел - по убыванию номер, для символов - по убыванию лексикографического порядка.

__Опция `Cтепень распараллеливания`__ может принимать одно из следующих значений:
- `-p2` - задействуется два параллельных потока исполнения;
- `-p4` - задействуется четыре параллельных потока исполнения;
- `-p8` - задействуется восемь параллельных потоков исполнения (значение по умолчанию);
- `-p16` - задействуется шеснадцать параллельных потоков исполнения;
- `-p32` - задействуется тридцать два параллельных потока исполнения;

Специфика степени распараллеливания для утилит следующая:
- `TsfDataPrepare` - для каждого нового входного файла назначает новый параллельный поток исполнения;

